(function(){function t(t){this.path=t;var e=this.path.split("."),i=e.slice(0,e.length-1).join("."),n=e[e.length-1];this.at_2x_path=i+"@2x."+n}function e(e){this.el=e,this.path=new t(this.el.getAttribute("src"));var i=this;this.path.check_2x_variant(function(t){t&&i.swap()})}var i=typeof exports=="undefined"?window:exports;i.RetinaImagePath=t,t.confirmed_paths=[],t.prototype.is_external=function(){return!!this.path.match(/^https?\:/i)&&!this.path.match("//"+document.domain)},t.prototype.check_2x_variant=function(e){var i,n=this;if(this.is_external())return e(!1);if(this.at_2x_path in t.confirmed_paths)return e(!0);i=new XMLHttpRequest,i.open("HEAD",this.at_2x_path),i.onreadystatechange=function(){return i.readyState!=4?e(!1):i.status>=200&&i.status<=399?(t.confirmed_paths.push(n.at_2x_path),e(!0)):e(!1)},i.send()},i.RetinaImage=e,e.prototype.swap=function(t){function e(){i.el.complete?(i.el.setAttribute("width",i.el.offsetWidth),i.el.setAttribute("height",i.el.offsetHeight),i.el.setAttribute("src",t)):setTimeout(e,5)}typeof t=="undefined"&&(t=this.path.at_2x_path);var i=this;e()},i.devicePixelRatio>1&&(window.onload=function(){var t=document.getElementsByTagName("img"),i=[],n,a;for(n=0;n<t.length;n++)a=t[n],i.push(new e(a))})})();